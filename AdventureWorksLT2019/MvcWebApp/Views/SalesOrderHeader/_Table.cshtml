@using AdventureWorksLT2019.Models;
@using AdventureWorksLT2019.Resx;
@using Framework.Models;
@using AdventureWorksLT2019.MvcWebApp.Models;
@model PagedViewModel<SalesOrderHeaderDataModel.DefaultView[]>
@inject IUIStrings localizor;
<!--for EditableList "Create New" for now, can copy to Tiles -->
<input type="hidden" class="nt-list-count" value="@Model!.Result!.ResponseBody!.Count()" />
<div class="table-responsive p-0">
    <form>
    <table class="table table-hover table-bordered table-striped align-middle">
        <thead class="table-dark">
            <tr class="pt-0 pb-0">
                @if (Model!.UIListSetting.ShowListBulkActionRelated(true))
                {
                    <th class="p-0" style="width: 1% !important;"></th>
                }
                @if (Model!.UIListSetting.ShowItemButtons())
                {
                    <th class="p-0" style="width: 1% !important;"></th>
                }
                <th class="pt-0 pb-0">@localizor.Get("SalesOrderID")</th>
                <th class="pt-0 pb-0">@localizor.Get("RevisionNumber")</th>
                <th class="pt-0 pb-0">@localizor.Get("OrderDate")</th>
                <th class="pt-0 pb-0">@localizor.Get("DueDate")</th>
                <th class="pt-0 pb-0">@localizor.Get("ShipDate")</th>
                <th class="pt-0 pb-0">@localizor.Get("Status")</th>
                <th class="pt-0 pb-0">@localizor.Get("OnlineOrderFlag")</th>
                <th class="pt-0 pb-0">@localizor.Get("SalesOrderNumber")</th>
                <th class="pt-0 pb-0">@localizor.Get("PurchaseOrderNumber")</th>
                <th class="pt-0 pb-0">@localizor.Get("AccountNumber")</th>
                <th class="pt-0 pb-0">@localizor.Get("CustomerID")</th>
                <th class="pt-0 pb-0">@localizor.Get("ShipToAddressID")</th>
                <th class="pt-0 pb-0">@localizor.Get("BillToAddressID")</th>
                <th class="pt-0 pb-0">@localizor.Get("ShipMethod")</th>
                <th class="pt-0 pb-0">@localizor.Get("CreditCardApprovalCode")</th>
                <th class="pt-0 pb-0">@localizor.Get("SubTotal")</th>
                <th class="pt-0 pb-0">@localizor.Get("TaxAmt")</th>
                <th class="pt-0 pb-0">@localizor.Get("Freight")</th>
                <th class="pt-0 pb-0">@localizor.Get("TotalDue")</th>
                <th class="pt-0 pb-0">@localizor.Get("Comment")</th>
                <th class="pt-0 pb-0">@localizor.Get("rowguid")</th>
                <th class="pt-0 pb-0">@localizor.Get("ModifiedDate")</th>
                @if (Model!.UIListSetting.ShowItemUIStatus())
                {
                    <th style="width: 1% !important;"></th>
                }
                @if (Model!.UIListSetting.ShowEditableListDeleteSelect())
                {
                    <th class="text-center" style="width: 1% !important;"><i class="fa-solid fa-trash"></i></th>
                }
            </tr>
        </thead>
        <tbody>
            @if (Model != null && Model.Result != null && Model.Result.Status == System.Net.HttpStatusCode.OK && Model.Result.ResponseBody != null)
            {
                for (var i = 0; i < Model.Result.ResponseBody.Length; i++)
                {
                    @await Html.PartialAsync("~/Views/SalesOrderHeader/_TableItemTr.cshtml",
                        new MvcItemViewModel<SalesOrderHeaderDataModel.DefaultView>
                        {
                            UIItemFeatures = Model.UIListSetting.GetUIItemFeatures(),
                            Status = System.Net.HttpStatusCode.OK,
                            StatusMessage = Model.Result.StatusMessage,
                            Template = Model!.UIListSetting.UIParams.PagedViewOption != PagedViewOptions.EditableTable ? ViewItemTemplateNames.Details.ToString() : ViewItemTemplateNames.Edit.ToString(),
                            IndexInArray = i,
                            Model = Model.Result.ResponseBody[i],
                            TopLevelDropDownListsFromDatabase = Model.TopLevelDropDownListsFromDatabase,
                        })
                }
            }
            else if (Model != null && Model.Result != null)
            {
                <tr>
                    <td colspan="50">
                        <div class="text-danger">@Model.Result.StatusMessage</div>
                    </td>
                </tr>
            }
        </tbody>
    </table>
    </form>
    @if (Model != null && Model!.UIListSetting!.UIListFeatures.HasPagination && Model.Result != null && Model.Result.Pagination != null)
    {
        @await Html.PartialAsync("~/Views/Shared/_Pagination.cshtml", Model.Result.Pagination)
    }
</div>
